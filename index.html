<!DOCTYPE html>
<html>
<head>
  <title>Dual-View Perception</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
</head>
<body>
  <a-scene>
    <a-box class="toggle-object" position="0 1 -3" 
           material="color: blue" 
           data-normal-color="blue" 
           data-heat-color="red" 
           data-label="Hot Box"></a-box>
    <button id="toggleButton">Toggle View</button>
  </a-scene>

  <script>
    // The toggle-view component code here
    AFRAME.registerComponent('toggle-view', {
      init: function () {
        let sceneEl = this.el;
        let isRobotView = false;

        document.querySelector('#toggleButton').addEventListener('click', function () {
          isRobotView = !isRobotView;
          sceneEl.querySelectorAll('.toggle-object').forEach(obj => {
            if (isRobotView) {
              obj.setAttribute('material', 'color', obj.dataset.heatColor); // Apply heatmap colors
              let label = document.createElement('a-text');
              label.setAttribute('value', obj.dataset.label);
              label.setAttribute('position', '0 1.5 0');
              label.setAttribute('align', 'center');
              label.setAttribute('color', 'yellow');
              obj.appendChild(label);
              obj.labelEl = label;
            } else {
              obj.setAttribute('material', 'color', obj.dataset.normalColor); // Reset to normal
              if (obj.labelEl) {
                obj.removeChild(obj.labelEl); // Remove label in human view
              }
            }
          });
        });
      }
    });
  </script>
</body>
</html>
